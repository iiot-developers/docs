IIOT 票卡欄位及變數說明
================
本文將介紹IIOT票卡欄位，及如何在欄位中套用變數

----------

IIOT票卡欄位可分為下列幾種：

1. 用戶檔案資訊
2. 廣播訊息
3. 個人推播訊息
4. 系統欄位
5. 變數欄位

皆可放在票卡欄位(正面)、訊息 (背面)

用戶檔案資訊
----------------

當用戶取卡(或匯入用戶資訊準備生卡時)，需填寫的欄位，可放置於票卡欄位(正面)、訊息(背面)。

如果要用戶填寫，但卻不希望顯示於票卡上，可將欄位設定在**參數配置**中的**會員開卡時必填欄位**

用戶檔案包含以下幾種，有各自的欄位屬性

1. 電話號碼(必設定) - tel
2. 姓名 - 文字
3. 性別 - 男 or 女
4. 生日 - Date
5. 電子郵件 - email
6. 家鄉 - list
7. 現居城市 - list
8. 自訂用戶資料 - 文字

設定自訂用戶資料時，須提供欄位標題以及`key`，這個`key`是用來區分多個自訂用戶資料的，可設定12個字母內的英文小寫，例如可自訂

```
標題: 班級
key: myclass
```

如此，即可搜集用戶的「班級」資料

廣播訊息
-----------

當票卡發行商要群播信息給所有用戶時，要透過**行銷訊息**欄位，此欄位內容用戶取卡/匯入用戶清單時不需要填寫，由後台主動新增/修改。

個人推播訊息
------------

若是要更改、推播某張特定票卡，可透過欄位**第三方程式介面**，此欄位除了飄提，還需要設定`Key`以及預設資訊。

`Key`是如果要透過第三方程式來更新此張票卡時，透過這個設定的key來指定是要更新此票卡

此欄位也可從後台進行操作，透過搜尋找出指定票卡後，編輯此票卡欄位，可找到第三方程式欄位

系統欄位
----------

由系統所控制的欄位，不需由後台管理員或是用戶取卡填寫，包括以下欄位：

1. 條碼資訊 - 條碼內容資訊
2. 點 - 會員系統的點數

變數欄位
-----------

變數欄位基本上也是由系統控制，後台管理者在此欄位內容設定變數，系統將依據每張票卡的用戶檔案及票卡資訊，動態設定此種欄位。

**若是要設定用戶檔案為變數，一定要記得新增欄位用以搜集用戶檔案資訊**

###變數說明###

**系統變數：**

`{{pass.barcodeMessage}}` : 票卡條碼
`{{pass.distId}}` : 票卡ID
`{{pass.phoneNumber}}`: 票卡綁定電話
`{{pass.cardId}}`:  票卡綁定ID (目前等同於電話)

**用戶檔案變數**

`{{pass.displayName}}`:  姓名
`{{pass.phoneNumber}}`: 電話
`{{pass.birthday}}`: 生日
`{{pass.email}}`: 電子郵件
`{{pass.gender}}`: 性別
`{{pass.hometown}}`: 家鄉
`{{pass.location}}`: 居住地
`{{pass.[customKey]}}`: 根據管理者設定的自訂用戶欄位的key顯示，例如`pass.class`


###欄位說明###

1. 個人化連結 - 可將變數填寫至連結中
2. 個人檔案 - 可編輯用戶檔案

**範例：個人化連結**

連結設定
```
http://demo.iiot.io?q={{pass.barcodeMessage}}
```
標題設定
```
連結點我
```

如此，票卡上此欄位將會顯示「連結點我」，並且連結位置將會是`http://demo.iiot.io?q=abcdefg`

**範例：個人檔案**

在用戶檔案中填寫

```bash
您的個人學習資料
班級：{{pass.class}}  // 此為自訂用戶欄位
姓名：{{pass.displayName}} // 姓名欄位
```
如此，系統將根據每張票卡的用戶檔案及票卡資訊來設定此欄位內容